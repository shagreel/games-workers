var h=Object.defineProperty;var u=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var A=Object.prototype.hasOwnProperty;var f=(o,e)=>{for(var n in e)h(o,n,{get:e[n],enumerable:!0})},w=(o,e,n,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let t of p(e))!A.call(o,t)&&t!==n&&h(o,t,{get:()=>e[t],enumerable:!(i=u(e,t))||i.enumerable});return o};var C=o=>w(h({},"__esModule",{value:!0}),o);var R={};f(R,{createCors:()=>O});module.exports=C(R);var O=(o={})=>{let{origins:e=["*"],maxAge:n,methods:i=["GET"],headers:t={}}=o,l,d={"content-type":"application/json","Access-Control-Allow-Methods":i.join(", "),...t};return n&&(d["Access-Control-Max-Age"]=n),{corsify:s=>{if(!s)throw new Error("No fetch handler responded and no upstream to proxy to specified.");let{headers:c,status:r,body:a}=s;if(r===101)return s;let g=Object.fromEntries(c);return g["access-control-allow-origin"]||[301,302,308].includes(r)?s:new Response(a,{status:r,headers:{...g,...d,...l,"content-type":c.get("content-type")}})},preflight:s=>{let c=[...new Set(["OPTIONS",...i])],r=s.headers.get("origin");if(l=(e.includes(r)||e.includes("*"))&&{"Access-Control-Allow-Origin":r},s.method==="OPTIONS"){if(s.headers.get("Origin")!==null&&s.headers.get("Access-Control-Request-Method")!==null&&s.headers.get("Access-Control-Request-Headers")!==null){let a={...d,"Access-Control-Allow-Methods":c.join(", "),"Access-Control-Allow-Headers":s.headers.get("Access-Control-Request-Headers"),...l};return new Response(null,{headers:a})}return new Response(null,{headers:{Allow:c.join(", ")}})}}}};0&&(module.exports={createCors});
